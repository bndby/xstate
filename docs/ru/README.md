<p align="center">
  <a href="https://xstate.js.org">
  <br />
  <img src="https://user-images.githubusercontent.com/1093738/101672561-06aa7480-3a24-11eb-89d1-787fa7112138.png" alt="XState" width="150"/>
  <br />
    <sub><strong>–ö–æ–Ω–µ—á–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç—ã –∏ –¥–∏–∞–≥—Ä–∞–º–º—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç–∞.</strong></sub>
  <br />
  <br />
  </a>
</p>

[![npm version](https://badge.fury.io/js/xstate.svg)](https://badge.fury.io/js/xstate)
<img src="https://opencollective.com/xstate/tiers/backer/badge.svg?label=sponsors&color=brightgreen" />

JavaScript –∏ TypeScript [–∫–æ–Ω–µ—á–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç—ã](https://en.wikipedia.org/wiki/Finite-state_machine) –∏ [–¥–∏–∞–≥—Ä–∞–º–º—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π](https://www.sciencedirect.com/science/article/pii/0167642387900359/pdf) –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞.

–ù–æ–≤–∏—á–æ–∫ –≤ –∫–æ–Ω–µ—á–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–∞—Ö –∏ –¥–∏–∞–≥—Ä–∞–º–∞—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π? [–ü—Ä–æ—á—Ç–∏—Ç–µ –Ω–∞—à–µ –≤–≤–µ–¥–µ–Ω–∏–µ](/guides/introduction-to-state-machines-and-statecharts/).

üñ• [–°–∫–∞—á–∞—Ç—å –Ω–∞—à–µ VS Code —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ](https://marketplace.visualstudio.com/items?itemName=statelyai.stately-vscode).

üìë –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç [SCXML —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏](https://www.w3.org/TR/scxml/)

üí¨ –ß–∞—Ç –≤ [Stately Discord —Å–æ–æ–±—â–µ—Å—Ç–≤–µ](https://discord.gg/KCtSX7Cdjh)

## –ü–∞–∫–µ—Ç—ã

- ü§ñ `xstate` - –ë–∞–∑–æ–≤–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∫–æ–Ω–µ—á–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–æ–≤ –∏ –¥–∏–∞–≥—Ä–∞–º–º —Å–æ—Å—Ç–æ—è–Ω–∏–π + –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä
- [üî¨ `@xstate/fsm`](https://github.com/statelyai/xstate/tree/main/packages/xstate-fsm) - –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∫–æ–Ω–µ—á–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–æ–≤
- [üìâ `@xstate/graph`](https://github.com/statelyai/xstate/tree/main/packages/xstate-graph) - –£—Ç–∏–ª–∏—Ç—ã –æ–±—Ö–æ–¥–∞ –≥—Ä–∞—Ñ–∞ –¥–ª—è XState
- [‚öõÔ∏è `@xstate/react`](https://github.com/statelyai/xstate/tree/main/packages/xstate-react) - React x—É–∫–∏ –∏ —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è XState –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö React
- [üíö `@xstate/vue`](https://github.com/statelyai/xstate/tree/main/packages/xstate-vue) - –§—É–Ω–∫—Ü–∏–∏ –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ –∏ —É—Ç–∏–ª–∏—Ç—ã Vue –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è XState –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö Vue
- [üé∑ `@xstate/svelte`](https://github.com/statelyai/xstate/tree/main/packages/xstate-svelte) - –£—Ç–∏–ª–∏—Ç—ã Svelte –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è XState –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö Svelte
- [‚úÖ `@xstate/test`](https://github.com/statelyai/xstate/tree/main/packages/xstate-test) - –£—Ç–∏–ª–∏—Ç—ã Model-Based-Testing (—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º XState) –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ª—é–±–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è
- [üîç `@xstate/inspect`](https://github.com/statelyai/xstate/tree/main/packages/xstate-inspect) - –£—Ç–∏–ª–∏—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (–ø—Ä–æ–≤–µ—Ä–∫–∏) –¥–ª—è XState

## –®–∞–±–ª–æ–Ω—ã

–ù–∞—á–Ω–∏—Ç–µ —Å —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–æ—Ä–∫–∞ –æ–¥–Ω–æ–≥–æ –∏–∑ —ç—Ç–∏—Ö —à–∞–±–ª–æ–Ω–æ–≤ –Ω–∞ CodeSandbox:

- [XState Template](https://codesandbox.io/s/xstate-example-template-m4ckv) - –±–µ–∑ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤
- [XState + TypeScript Template](https://codesandbox.io/s/xstate-typescript-template-s9kz8) - –±–µ–∑ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤
- [XState + React Template](https://codesandbox.io/s/xstate-react-template-3t2tg)
- [XState + React + TypeScript Template](https://codesandbox.io/s/xstate-react-typescript-template-wjdvn)
- [XState + Vue Template](https://codesandbox.io/s/xstate-vue-template-composition-api-1n23l)
- [XState + Vue 3 Template](https://codesandbox.io/s/xstate-vue-3-template-vrkk9)
- [XState + Svelte Template](https://codesandbox.io/s/xstate-svelte-template-jflv1)

## –°—É–ø–µ—Ä –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
npm install xstate
```

```js
import { createMachine, interpret } from 'xstate';

// Stateless machine definition
// machine.transition(...) is a pure function used by the interpreter.
const toggleMachine = createMachine({
  id: 'toggle',
  initial: 'inactive',
  states: {
    inactive: {
      on: {
        TOGGLE: { target: 'active' }
      }
    },
    active: {
      on: {
        TOGGLE: { target: 'inactive' }
      }
    }
  }
});

// Machine instance with internal state
const toggleService = interpret(toggleMachine)
  .onTransition((state) => console.log(state.value))
  .start();
// => 'inactive'

toggleService.send({ type: 'TOGGLE' });
// => 'active'

toggleService.send({ type: 'TOGGLE' });
// => 'inactive'
```

## –ü—Ä–∏–º–µ—Ä —Å –ø—Ä–æ–º–∏—Å–∞–º–∏

[üìâ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ stately.ai/viz](https://stately.ai/viz?gist=bbcb4379b36edea0458f597e5eec2f91)

```js
import { createMachine, interpret, assign } from 'xstate';

const fetchMachine = createMachine({
  id: 'Dog API',
  initial: 'idle',
  context: {
    dog: null
  },
  states: {
    idle: {
      on: {
        FETCH: { target: 'loading' }
      }
    },
    loading: {
      invoke: {
        id: 'fetchDog',
        src: (context, event) =>
          fetch('https://dog.ceo/api/breeds/image/random').then((data) =>
            data.json()
          ),
        onDone: {
          target: 'resolved',
          actions: assign({
            dog: (_, event) => event.data
          })
        },
        onError: {
          target: 'rejected'
        }
      },
      on: {
        CANCEL: { target: 'idle' }
      }
    },
    rejected: {
      on: {
        FETCH: { target: 'loading' }
      }
    },
    resolved: {
      type: 'final'
    }
  }
});

const dogService = interpret(fetchMachine)
  .onTransition((state) => console.log(state.value))
  .start();

dogService.send({ type: 'FETCH' });
```

<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->

- [Visualizer](#visualizer)
- [Why?](#why)
- [Finite State Machines](#finite-state-machines)
- [Hierarchical (Nested) State Machines](#hierarchical-nested-state-machines)
- [Parallel State Machines](#parallel-state-machines)
- [History States](#history-states)
- [Sponsors](#sponsors)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

## –í–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä

**[–í–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ, –º–æ–¥–µ–ª–∏—Ä—É–π—Ç–µ –∏ –¥–µ–ª–∏—Ç–µ—Å—å —Å–≤–æ–∏–º–∏ –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π –≤ XState Viz!](https://stately.ai/viz)**

<a href="https://stately.ai/viz"><img src="https://i.imgur.com/3pEB0B3.png" alt="XState Visualizer" width="300" /></a>

## –ü–æ—á–µ–º—É?

**–î–∏–∞–≥—Ä–∞–º–º—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π** - —ç—Ç–æ —Ñ–æ—Ä–º–∞–ª–∏–∑–º –¥–ª—è –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–∏—Å—Ç–µ–º —Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è. –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è _–ø–æ–≤–µ–¥–µ–Ω–∏—è_ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –æ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥–æ –æ–±—â–µ–π –ª–æ–≥–∏–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

–°–º–æ—Ç—Ä–∏—Ç–µ [üìΩ —Å–ª–∞–π–¥—ã](http://slides.com/davidkhourshid/finite-state-machines) ([üé• –≤–∏–¥–µ–æ](https://www.youtube.com/watch?v=VU1NKX6Qkxc)) –ª–∏ –æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å —ç—Ç–∏–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –æ –≤–∞–∂–Ω–æ—Å—Ç–∏ –∫–æ–Ω–µ—á–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–æ–≤ –∏ –¥–∏–∞–≥—Ä–∞–º–º —Å–æ—Å—Ç–æ—è–Ω–∏–π –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö:

- [Statecharts - A Visual Formalism for Complex Systems](https://www.sciencedirect.com/science/article/pii/0167642387900359/pdf) by David Harel
- [The World of Statecharts](https://statecharts.github.io/) –∞–≤—Ç–æ—Ä Erik Mogensen
- [Pure UI](https://rauchg.com/2015/pure-ui) –∞–≤—Ç–æ—Ä Guillermo Rauch
- [Pure UI Control](https://medium.com/@asolove/pure-ui-control-ac8d1be97a8d) –∞–≤—Ç–æ—Ä Adam Solove
- [Spectrum - Statecharts Community](https://spectrum.chat/statecharts) (–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å XState, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ [GitHub Discussions](https://github.com/statelyai/xstate/discussions))

## –ö–æ–Ω–µ—á–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç—ã

<img src="https://imgur.com/rqqmkJh.png" alt="Light Machine" width="300" />

```js
import { createMachine } from 'xstate';

const lightMachine = createMachine({
  id: 'light',
  initial: 'green',
  states: {
    green: {
      on: {
        TIMER: { target: 'yellow' }
      }
    },
    yellow: {
      on: {
        TIMER: { target: 'red' }
      }
    },
    red: {
      on: {
        TIMER: { target: 'green' }
      }
    }
  }
});

const currentState = 'green';

const nextState = lightMachine.transition(currentState, { type: 'TIMER' })
  .value;

// => 'yellow'
```

## –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ (–≤–ª–æ–∂–µ–Ω–Ω—ã–µ) –∫–æ–Ω–µ—á–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç—ã

<img src="https://imgur.com/GDZAeB9.png" alt="Hierarchical Light Machine" width="300" />

```js
import { createMachine } from 'xstate';

const pedestrianStates = {
  initial: 'walk',
  states: {
    walk: {
      on: {
        PED_TIMER: { target: 'wait' }
      }
    },
    wait: {
      on: {
        PED_TIMER: { target: 'stop' }
      }
    },
    stop: {}
  }
};

const lightMachine = createMachine({
  id: 'light',
  initial: 'green',
  states: {
    green: {
      on: {
        TIMER: { target: 'yellow' }
      }
    },
    yellow: {
      on: {
        TIMER: { target: 'red' }
      }
    },
    red: {
      on: {
        TIMER: { target: 'green' }
      },
      ...pedestrianStates
    }
  }
});

const currentState = 'yellow';

const nextState = lightMachine.transition(currentState, { type: 'TIMER' })
  .value;
// => {
//   red: 'walk'
// }

lightMachine.transition('red.walk', { type: 'PED_TIMER' }).value;
// => {
//   red: 'wait'
// }
```

**–û–±—ä–µ–∫—Ç–Ω–∞—è –Ω–æ—Ç–∞—Ü–∏—è –¥–ª—è –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π:**

```js
// ...
const waitState = lightMachine.transition(
  { red: 'walk' },
  { type: 'PED_TIMER' }
).value;

// => { red: 'wait' }

lightMachine.transition(waitState, { type: 'PED_TIMER' }).value;

// => { red: 'stop' }

lightMachine.transition({ red: 'stop' }, { type: 'TIMER' }).value;

// => 'green'
```

## –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∫–æ–Ω–µ—á–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç—ã

<img src="https://imgur.com/GKd4HwR.png" width="300" alt="Parallel state machine" />

```js
import { createMachine } from 'xstate';

const wordMachine = createMachine({
  id: 'word',
  type: 'parallel',
  states: {
    bold: {
      initial: 'off',
      states: {
        on: {
          on: {
            TOGGLE_BOLD: { target: 'off' }
          }
        },
        off: {
          on: {
            TOGGLE_BOLD: { target: 'on' }
          }
        }
      }
    },
    underline: {
      initial: 'off',
      states: {
        on: {
          on: {
            TOGGLE_UNDERLINE: { target: 'off' }
          }
        },
        off: {
          on: {
            TOGGLE_UNDERLINE: { target: 'on' }
          }
        }
      }
    },
    italics: {
      initial: 'off',
      states: {
        on: {
          on: {
            TOGGLE_ITALICS: { target: 'off' }
          }
        },
        off: {
          on: {
            TOGGLE_ITALICS: { target: 'on' }
          }
        }
      }
    },
    list: {
      initial: 'none',
      states: {
        none: {
          on: {
            BULLETS: { target: 'bullets' },
            NUMBERS: { target: 'numbers' }
          }
        },
        bullets: {
          on: {
            NONE: { target: 'none' },
            NUMBERS: { target: 'numbers' }
          }
        },
        numbers: {
          on: {
            BULLETS: { target: 'bullets' },
            NONE: { target: 'none' }
          }
        }
      }
    }
  }
});

const boldState = wordMachine.transition('bold.off', { type: 'TOGGLE_BOLD' })
  .value;

// {
//   bold: 'on',
//   italics: 'off',
//   underline: 'off',
//   list: 'none'
// }

const nextState = wordMachine.transition(
  {
    bold: 'off',
    italics: 'off',
    underline: 'on',
    list: 'bullets'
  },
  { type: 'TOGGLE_ITALICS' }
).value;

// {
//   bold: 'off',
//   italics: 'on',
//   underline: 'on',
//   list: 'bullets'
// }
```

## –ò—Å—Ç–æ—Ä–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π

<img src="https://imgur.com/I4QsQsz.png" width="300" alt="–ö–æ–Ω–µ—á–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç —Å –∏—Å—Ç–æ—Ä–∏–µ–π —Å–æ—Å—Ç–æ—è–Ω–∏–π" />

```js
import { createMachine } from 'xstate';

const paymentMachine = createMachine({
  id: 'payment',
  initial: 'method',
  states: {
    method: {
      initial: 'cash',
      states: {
        cash: {
          on: {
            SWITCH_CHECK: { target: 'check' }
          }
        },
        check: {
          on: {
            SWITCH_CASH: { target: 'cash' }
          }
        },
        hist: { type: 'history' }
      },
      on: {
        NEXT: { target: 'review' }
      }
    },
    review: {
      on: {
        PREVIOUS: { target: 'method.hist' }
      }
    }
  }
});

const checkState = paymentMachine.transition('method.cash', {
  type: 'SWITCH_CHECK'
});

// => State {
//   value: { method: 'check' },
//   history: State { ... }
// }

const reviewState = paymentMachine.transition(checkState, { type: 'NEXT' });

// => State {
//   value: 'review',
//   history: State { ... }
// }

const previousState = paymentMachine.transition(reviewState, {
  type: 'PREVIOUS'
}).value;

// => { method: 'check' }
```

## –°–ø–æ–Ω—Å–æ—Ä—ã

Huge thanks to the following companies for sponsoring `xstate`. You can sponsor further `xstate` development [on OpenCollective](https://opencollective.com/xstate).

<a href="https://tipe.io" title="Tipe.io"><img src="https://cdn.tipe.io/tipe/tipe-logo.svg?w=240" style="background:#613DEF" /></a>
<a href="https://webflow.com" title="Webflow"><img src="https://uploads-ssl.webflow.com/583347ca8f6c7ee058111b3b/5b03bde0971fdd75d75b5591_webflow.png" height="100" /></a>
